// Address Management API Request Messages
//
// Request messages for Address domain CRUD operations.
//
// DOMAIN: Contact - Address Management
// VERSION: v1
// COMPLIANCE: SOC 2 CC6.1, GDPR Articles 5/17, ISO 27001 A.9.2
// PII: Yes - Contains personal identifiers and address data

syntax = "proto3";

package geniustechspace.contact.address.api.v1;

import "buf/validate/validate.proto";
import "contact/address/v1/address.proto";
import "core/api/pagination/v1/messages.proto";
import "google/protobuf/field_mask.proto";

option go_package = "github.com/geniustechspace/protobuf/gen/go/contact/address/api/v1;addressv1";
option java_multiple_files = true;
option java_package = "com.geniustechspace.protobuf.contact.address.api.v1";

// CreateAddressRequest creates new address.
// OFFLINE SUPPORT: address_id can be pre-generated for offline-first apps.
message CreateAddressRequest {
  // Address data to create.
  // REQUIRED: Yes - must include tenant_path, user_id, label, and address fields
  // OFFLINE: address_id can be pre-generated; if omitted, server generates it
  // PII: Yes - contains personal identifiers per GDPR Article 4(1)
  geniustechspace.contact.address.v1.UserAddress data = 1;

  reserved 2 to 9;
}

// GetAddressRequest retrieves address by ID.
message GetAddressRequest {
  // Tenant path for multi-tenancy isolation.
  // REQUIRED: Yes
  string tenant_path = 1 [(buf.validate.field).string.max_len = 512];

  // Address ID to retrieve.
  // REQUIRED: Yes
  string address_id = 2 [(buf.validate.field).string.max_len = 512];

  reserved 3 to 9;
}

// UpdateAddressRequest modifies existing address (partial update).
message UpdateAddressRequest {
  // Address data with fields to update.
  // REQUIRED: Yes - must contain tenant_path and address_id
  // PII: Yes - contains personal data per GDPR Article 4(1)
  // PARTIAL UPDATE: Only fields listed in update_mask are modified
  geniustechspace.contact.address.v1.UserAddress data = 1;

  // Field mask specifying which fields to update.
  // REQUIRED: Yes - explicit intent required for updates
  // EXAMPLES:
  //   - Update label: paths: ["label", "custom_label"]
  //   - Update address: paths: ["street_line1", "city", "postal_code"]
  //   - Update tags: paths: ["tags"]
  google.protobuf.FieldMask update_mask = 2 [(buf.validate.field).required = true];

  reserved 3 to 9;
}

// DeleteAddressRequest soft-deletes or hard-deletes address.
message DeleteAddressRequest {
  // Tenant path for multi-tenancy isolation.
  // REQUIRED: Yes
  string tenant_path = 1 [(buf.validate.field).string.max_len = 512];

  // Address ID to delete.
  // REQUIRED: Yes
  string address_id = 2 [(buf.validate.field).string.max_len = 512];

  // Hard delete flag (irreversible).
  // DEFAULT: false (soft delete)
  bool hard_delete = 3;

  reserved 4 to 9;
}

// ListAddressesRequest retrieves paginated list of addresses.
message ListAddressesRequest {
  // Tenant path for multi-tenancy isolation.
  // REQUIRED: Yes
  string tenant_path = 1 [(buf.validate.field).string.max_len = 512];

  // User ID to filter by.
  // REQUIRED: Yes
  string user_id = 2 [(buf.validate.field).string.max_len = 512];

  // Pagination parameters.
  core.api.pagination.v1.PaginationRequest pagination = 3;

  // Filter by label (e.g., "HOME", "WORK", "BILLING").
  // OPTIONAL: If empty, returns all labels
  string label_filter = 4;

  // Include soft-deleted records.
  // DEFAULT: false
  bool include_deleted = 5;

  reserved 6 to 9;
}

// VerifyAddressRequest verifies address via postal verification.
message VerifyAddressRequest {
  // Tenant path for multi-tenancy isolation.
  // REQUIRED: Yes
  string tenant_path = 1 [(buf.validate.field).string.max_len = 512];

  // Address ID to verify.
  // REQUIRED: Yes
  string address_id = 2 [(buf.validate.field).string.max_len = 512];

  // Verification method: "postal_code", "geocode", "manual".
  // DEFAULT: "postal_code"
  string method = 3 [(buf.validate.field).string = {
    in: [
      "postal_code",
      "geocode",
      "manual"
    ]
  }];

  reserved 4 to 9;
}
