// Email Management API Request Messages
//
// Request messages for Email domain CRUD operations.
//
// DOMAIN: Contact - Email Management
// VERSION: v1
// COMPLIANCE: SOC 2 CC6.1, GDPR Articles 5/17, ISO 27001 A.9.2
// PII: Yes - Contains personal identifiers and email data

syntax = "proto3";

package geniustechspace.contact.email.api.v1;

import "buf/validate/validate.proto";
import "contact/email/v1/email.proto";
import "core/api/pagination/v1/messages.proto";
import "google/protobuf/field_mask.proto";

option go_package = "github.com/geniustechspace/protobuf/gen/go/contact/email/api/v1;emailv1";
option java_multiple_files = true;
option java_package = "com.geniustechspace.protobuf.contact.email.api.v1";

// CreateEmailRequest creates new email address.
// OFFLINE SUPPORT: email_id can be pre-generated for offline-first apps.
message CreateEmailRequest {
  // Email data to create.
  // REQUIRED: Yes - must include tenant_path, user_id, label, and email
  // OFFLINE: email_id can be pre-generated; if omitted, server generates it
  // PII: Yes - contains personal identifiers per GDPR Article 4(1)
  geniustechspace.contact.email.v1.UserEmail data = 1;

  reserved 2 to 9;
}

// GetEmailRequest retrieves email by ID.
message GetEmailRequest {
  // Tenant path for multi-tenancy isolation.
  // REQUIRED: Yes
  string tenant_path = 1 [(buf.validate.field).string.max_len = 512];

  // Email ID to retrieve.
  // REQUIRED: Yes
  string email_id = 2 [(buf.validate.field).string.max_len = 512];

  reserved 3 to 9;
}

// UpdateEmailRequest modifies existing email (partial update).
message UpdateEmailRequest {
  // Email data with fields to update.
  // REQUIRED: Yes - must contain tenant_path and email_id
  // PII: Yes - contains personal data per GDPR Article 4(1)
  // PARTIAL UPDATE: Only fields listed in update_mask are modified
  geniustechspace.contact.email.v1.UserEmail data = 1;

  // Field mask specifying which fields to update.
  // REQUIRED: Yes - explicit intent required for updates
  // EXAMPLES:
  //   - Update label: paths: ["label", "custom_label"]
  //   - Update tags: paths: ["tags"]
  //   - Update primary: paths: ["is_primary"]
  google.protobuf.FieldMask update_mask = 2 [(buf.validate.field).required = true];

  reserved 3 to 9;
}

// DeleteEmailRequest soft-deletes or hard-deletes email.
message DeleteEmailRequest {
  // Tenant path for multi-tenancy isolation.
  // REQUIRED: Yes
  string tenant_path = 1 [(buf.validate.field).string.max_len = 512];

  // Email ID to delete.
  // REQUIRED: Yes
  string email_id = 2 [(buf.validate.field).string.max_len = 512];

  // Hard delete flag (irreversible).
  // DEFAULT: false (soft delete)
  bool hard_delete = 3;

  reserved 4 to 9;
}

// ListEmailsRequest retrieves paginated list of emails.
message ListEmailsRequest {
  // Tenant path for multi-tenancy isolation.
  // REQUIRED: Yes
  string tenant_path = 1 [(buf.validate.field).string.max_len = 512];

  // User ID to filter by.
  // REQUIRED: Yes
  string user_id = 2 [(buf.validate.field).string.max_len = 512];

  // Pagination parameters.
  core.api.pagination.v1.PaginationRequest pagination = 3;

  // Filter by label (e.g., "PERSONAL", "WORK").
  // OPTIONAL: If empty, returns all labels
  string label_filter = 4;

  // Include soft-deleted records.
  // DEFAULT: false
  bool include_deleted = 5;

  reserved 6 to 9;
}

// VerifyEmailRequest verifies email via verification link/code.
message VerifyEmailRequest {
  // Tenant path for multi-tenancy isolation.
  // REQUIRED: Yes
  string tenant_path = 1 [(buf.validate.field).string.max_len = 512];

  // Email ID to verify.
  // REQUIRED: Yes
  string email_id = 2 [(buf.validate.field).string.max_len = 512];

  // Verification token sent via email.
  // REQUIRED: Yes
  string verification_token = 3 [(buf.validate.field).string = {
    min_len: 32
    max_len: 256
  }];

  reserved 4 to 9;
}

// SendVerificationEmailRequest sends verification email.
message SendVerificationEmailRequest {
  // Tenant path for multi-tenancy isolation.
  // REQUIRED: Yes
  string tenant_path = 1 [(buf.validate.field).string.max_len = 512];

  // Email ID to send verification to.
  // REQUIRED: Yes
  string email_id = 2 [(buf.validate.field).string.max_len = 512];

  reserved 3 to 9;
}
