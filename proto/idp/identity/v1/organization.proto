// DOMAIN: Identity Provider - Organization Entity
// COMPLIANCE: SOC 2 CC6.1, GDPR Article 5, ISO 27001 A.9.2
// SECURITY: Authentication required, tenant isolation enforced
// PII: May contain organizational identifiers

syntax = "proto3";

package geniustechspace.idp.identity.v1;

import "buf/validate/validate.proto";
import "core/common/v1/common.proto";
import "core/metadata/v1/metadata.proto";

option csharp_namespace = "GeniusTechSpace.Protobuf.Idp.Identity.V1";
option go_package = "github.com/geniustechspace/protobuf/gen/go/idp/identity/v1;idpidentityv1";
option java_multiple_files = true;
option java_package = "com.geniustechspace.protobuf.idp.identity.v1";

// Organization represents a company or organizational unit.
// Multi-tenant systems may have multiple organizations per tenant.
message Organization {
  // Organization ID. REQUIRED.
  string id = 1 [(buf.validate.field).string.min_len = 1];

  // Tenant ID. REQUIRED.
  string tenant_id = 2 [(buf.validate.field).string.min_len = 1];

  // Name. REQUIRED.
  // Unique within tenant.
  string name = 3 [(buf.validate.field).string = {
    min_len: 1
    max_len: 128
  }];

  // Display name. REQUIRED.
  string display_name = 4 [(buf.validate.field).string.min_len = 1];

  // Description. OPTIONAL.
  string description = 5;

  // Parent organization ID. OPTIONAL.
  // For hierarchical organizations (subsidiaries, departments).
  string parent_organization_id = 6;

  // Domain. OPTIONAL.
  // Primary domain name (e.g., "example.com")
  string domain = 7 [(buf.validate.field).string.pattern = "^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?(\\.[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$"];

  // Verified domains. OPTIONAL.
  // All verified domains belonging to organization.
  repeated string verified_domains = 8;

  // Address. OPTIONAL.
  core.common.v1.Address address = 9;

  // Contact info. OPTIONAL.
  core.common.v1.ContactInfo contact_info = 10;

  // Website. OPTIONAL.
  string website = 11;

  // Industry. OPTIONAL.
  string industry = 12;

  // Size. OPTIONAL.
  // Employee count range.
  OrganizationSize size = 13;

  // Type. REQUIRED.
  OrganizationType type = 14 [(buf.validate.field).enum.defined_only = true];

  // Status. REQUIRED.
  OrganizationStatus status = 15 [(buf.validate.field).enum.defined_only = true];

  // Member count. OPTIONAL.
  // Total number of users in organization.
  int32 member_count = 16;

  // Settings. OPTIONAL.
  // Organization-specific settings (JSON).
  map<string, string> settings = 17;

  // Branding. OPTIONAL.
  OrganizationBranding branding = 18;

  // Tags. OPTIONAL.
  repeated string tags = 19;

  // Metadata. OPTIONAL.
  core.metadata.v1.Metadata metadata = 20;
}

// OrganizationType represents organization category.
enum OrganizationType {
  ORGANIZATION_TYPE_UNSPECIFIED = 0;
  ENTERPRISE = 1; // Large enterprise
  SMB = 2; // Small/medium business
  STARTUP = 3; // Startup
  NON_PROFIT = 4; // Non-profit organization
  GOVERNMENT = 5; // Government agency
  EDUCATIONAL = 6; // Educational institution
  PERSONAL = 7; // Personal/individual
  reserved 8 to 20;
}

// OrganizationSize represents employee count range.
enum OrganizationSize {
  ORGANIZATION_SIZE_UNSPECIFIED = 0;
  INDIVIDUAL = 1; // 1 person
  SMALL = 2; // 2-10 people
  MEDIUM = 3; // 11-50 people
  LARGE = 4; // 51-200 people
  ENTERPRISE = 5; // 201-1000 people
  VERY_LARGE = 6; // 1001+ people
  reserved 7 to 10;
}

// OrganizationStatus represents organization state.
enum OrganizationStatus {
  ORGANIZATION_STATUS_UNSPECIFIED = 0;
  ACTIVE = 1; // Active organization
  INACTIVE = 2; // Inactive but can be reactivated
  SUSPENDED = 3; // Temporarily suspended
  DELETED = 4; // Soft deleted
  PENDING_VERIFICATION = 5; // Awaiting domain verification
  reserved 6 to 10;
}

// OrganizationBranding contains visual identity.
message OrganizationBranding {
  // Logo URL. OPTIONAL.
  string logo_url = 1;

  // Icon URL. OPTIONAL.
  string icon_url = 2;

  // Primary color. OPTIONAL.
  // Hex color code (e.g., "#FF5733")
  string primary_color = 3 [(buf.validate.field).string.pattern = "^#[0-9A-Fa-f]{6}$"];

  // Secondary color. OPTIONAL.
  string secondary_color = 4 [(buf.validate.field).string.pattern = "^#[0-9A-Fa-f]{6}$"];

  // Accent color. OPTIONAL.
  string accent_color = 5 [(buf.validate.field).string.pattern = "^#[0-9A-Fa-f]{6}$"];
}

// CreateOrganizationRequest creates new organization.
// AUTHENTICATION: Required
// AUTHORIZATION: Requires 'organizations:create' permission
message CreateOrganizationRequest {
  // Tenant ID. REQUIRED.
  string tenant_id = 1 [(buf.validate.field).string.min_len = 1];

  // Name. REQUIRED.
  string name = 2 [(buf.validate.field).string = {
    min_len: 1
    max_len: 128
  }];

  // Display name. REQUIRED.
  string display_name = 3 [(buf.validate.field).string.min_len = 1];

  // Description. OPTIONAL.
  string description = 4;

  // Parent organization ID. OPTIONAL.
  string parent_organization_id = 5;

  // Domain. OPTIONAL.
  string domain = 6;

  // Address. OPTIONAL.
  core.common.v1.Address address = 7;

  // Contact info. OPTIONAL.
  core.common.v1.ContactInfo contact_info = 8;

  // Website. OPTIONAL.
  string website = 9;

  // Industry. OPTIONAL.
  string industry = 10;

  // Size. OPTIONAL.
  OrganizationSize size = 11;

  // Type. REQUIRED.
  OrganizationType type = 12 [(buf.validate.field).enum.defined_only = true];

  // Settings. OPTIONAL.
  map<string, string> settings = 13;

  // Branding. OPTIONAL.
  OrganizationBranding branding = 14;

  // Tags. OPTIONAL.
  repeated string tags = 15;
}

// CreateOrganizationResponse returns created organization.
message CreateOrganizationResponse {
  // Success. REQUIRED.
  bool success = 1;

  // Organization. OPTIONAL.
  Organization organization = 2;

  // Message. OPTIONAL.
  string message = 3;
}

// GetOrganizationRequest retrieves organization by ID.
// AUTHENTICATION: Required
// AUTHORIZATION: Requires 'organizations:read' permission
message GetOrganizationRequest {
  // Tenant ID. REQUIRED.
  string tenant_id = 1 [(buf.validate.field).string.min_len = 1];

  // Organization ID. REQUIRED.
  string organization_id = 2 [(buf.validate.field).string.min_len = 1];
}

// GetOrganizationResponse returns organization.
message GetOrganizationResponse {
  // Organization. REQUIRED.
  Organization organization = 1;
}

// UpdateOrganizationRequest updates organization.
// AUTHENTICATION: Required
// AUTHORIZATION: Requires 'organizations:update' permission
message UpdateOrganizationRequest {
  // Tenant ID. REQUIRED.
  string tenant_id = 1 [(buf.validate.field).string.min_len = 1];

  // Organization ID. REQUIRED.
  string organization_id = 2 [(buf.validate.field).string.min_len = 1];

  // Display name. OPTIONAL.
  string display_name = 3;

  // Description. OPTIONAL.
  string description = 4;

  // Address. OPTIONAL.
  core.common.v1.Address address = 5;

  // Contact info. OPTIONAL.
  core.common.v1.ContactInfo contact_info = 6;

  // Website. OPTIONAL.
  string website = 7;

  // Industry. OPTIONAL.
  string industry = 8;

  // Size. OPTIONAL.
  OrganizationSize size = 9;

  // Status. OPTIONAL.
  OrganizationStatus status = 10;

  // Settings. OPTIONAL.
  map<string, string> settings = 11;

  // Branding. OPTIONAL.
  OrganizationBranding branding = 12;

  // Tags. OPTIONAL.
  repeated string tags = 13;
}

// UpdateOrganizationResponse returns updated organization.
message UpdateOrganizationResponse {
  // Success. REQUIRED.
  bool success = 1;

  // Organization. OPTIONAL.
  Organization organization = 2;

  // Message. OPTIONAL.
  string message = 3;
}

// DeleteOrganizationRequest deletes organization.
// AUTHENTICATION: Required
// AUTHORIZATION: Requires 'organizations:delete' permission
message DeleteOrganizationRequest {
  // Tenant ID. REQUIRED.
  string tenant_id = 1 [(buf.validate.field).string.min_len = 1];

  // Organization ID. REQUIRED.
  string organization_id = 2 [(buf.validate.field).string.min_len = 1];
}

// DeleteOrganizationResponse confirms organization deletion.
message DeleteOrganizationResponse {
  // Success. REQUIRED.
  bool success = 1;

  // Message. OPTIONAL.
  string message = 2;
}

// ListOrganizationsRequest lists organizations.
// AUTHENTICATION: Required
// AUTHORIZATION: Requires 'organizations:list' permission
message ListOrganizationsRequest {
  // Tenant ID. REQUIRED.
  string tenant_id = 1 [(buf.validate.field).string.min_len = 1];

  // Parent organization ID. OPTIONAL.
  // Filter by parent organization.
  string parent_organization_id = 2;

  // Type. OPTIONAL.
  // Filter by type.
  OrganizationType type = 3;

  // Status. OPTIONAL.
  // Filter by status.
  OrganizationStatus status = 4;

  // Page size. OPTIONAL.
  int32 page_size = 5 [(buf.validate.field).int32 = {
    gte: 1
    lte: 100
  }];

  // Page token. OPTIONAL.
  string page_token = 6;
}

// ListOrganizationsResponse returns paginated organizations.
message ListOrganizationsResponse {
  // Organizations. REQUIRED.
  repeated Organization organizations = 1;

  // Next page token. OPTIONAL.
  string next_page_token = 2;

  // Total count. OPTIONAL.
  int32 total_count = 3;
}
