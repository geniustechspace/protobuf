// DOMAIN: Identity - Organization Management APIRequests
// COMPLIANCE: SOC 2 CC6.1, ISO 27001 A.9.2
// SECURITY: Authentication required, tenant isolation enforced
// PII: No - Organization data is not personal information

syntax = "proto3";

package geniustechspace.idp.identity.organization.api.v1;

import "buf/validate/validate.proto";
import "core/api/pagination/v1/messages.proto";
import "core/common/v1/common.proto";
import "google/protobuf/field_mask.proto";
import "idp/identity/organization/v1/organization.proto";

option go_package = "github.com/geniustechspace/protobuf/gen/go/idp/identity/organization/api/v1;organizationapiv1";

// OFFLINE SUPPORT: organization_id can be pre-generated (any string format (UUID, ULID, custom)).
message CreateOrganizationRequest {
  // Organization data to create.
  // OFFLINE: organization_id can be pre-generated
  geniustechspace.idp.identity.organization.v1.Organization data = 1;

  reserved 2 to 9;
}
message GetOrganizationRequest {
  string tenant_path = 1 [(buf.validate.field).string.max_len = 512];

  oneof identifier {
    string organization_id = 2 [(buf.validate.field).string.max_len = 512];
    string name = 3 [(buf.validate.field).string.max_len = 512];
    string domain = 4 [(buf.validate.field).string.pattern = "^[a-z0-9-]+\\.[a-z]{2,}$"];
  }

  reserved 5 to 9;
}
message UpdateOrganizationRequest {
  // Organization data with fields to update. Must include tenant_path and identifier.
  // REQUIRED: Must contain tenant_path + (organization_id OR name) for lookup
  // PARTIAL UPDATE: Only fields listed in update_mask are modified
  geniustechspace.idp.identity.organization.v1.Organization data = 1;

  // Field mask specifying which fields to update.
  // REQUIRED: Yes - explicit intent required
  // EXAMPLES: paths: ["name", "description", "size", "metadata.industry"]
  google.protobuf.FieldMask update_mask = 2 [(buf.validate.field).required = true];

  reserved 3 to 9;
}
message DeleteOrganizationRequest {
  string tenant_path = 1 [(buf.validate.field).string.max_len = 512];
  string organization_id = 2 [(buf.validate.field).string.max_len = 512];
  bool hard_delete = 3;
}
message ListOrganizationsRequest {
  string tenant_path = 1 [(buf.validate.field).string.max_len = 512];
  geniustechspace.core.api.pagination.v1.PaginationRequest pagination = 2;
  optional geniustechspace.idp.identity.organization.v1.OrganizationStatus status = 3;
}
