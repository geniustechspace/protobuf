syntax = "proto3";

package notifications.v1;

option go_package = "github.com/geniustechspace/protobuf/gen/go/notifications/v1;notificationsv1";
option java_multiple_files = true;
option java_package = "com.geniustechspace.protobuf.notifications.v1";
option csharp_namespace = "GeniusTechSpace.Protobuf.Notifications.V1";

import "google/protobuf/timestamp.proto";
import "proto/notifications/v1/notifications.proto";

// NotificationSentEvent is triggered when a notification is sent
message NotificationSentEvent {
  string notification_id = 1;
  string tenant_id = 2;
  string user_id = 3;
  NotificationType type = 4;
  repeated NotificationChannel channels = 5;
  google.protobuf.Timestamp sent_at = 6;
}

// NotificationDeliveredEvent is triggered when a notification is delivered
message NotificationDeliveredEvent {
  string notification_id = 1;
  string tenant_id = 2;
  string user_id = 3;
  NotificationChannel channel = 4;
  google.protobuf.Timestamp delivered_at = 5;
}

// NotificationReadEvent is triggered when a notification is read
message NotificationReadEvent {
  string notification_id = 1;
  string tenant_id = 2;
  string user_id = 3;
  google.protobuf.Timestamp read_at = 4;
}

// NotificationFailedEvent is triggered when a notification fails to send
message NotificationFailedEvent {
  string notification_id = 1;
  string tenant_id = 2;
  string user_id = 3;
  NotificationChannel channel = 4;
  string error = 5;
  google.protobuf.Timestamp failed_at = 6;
}

// NotificationDeletedEvent is triggered when a notification is deleted
message NotificationDeletedEvent {
  string notification_id = 1;
  string tenant_id = 2;
  string user_id = 3;
  google.protobuf.Timestamp deleted_at = 4;
}

// NotificationPreferencesUpdatedEvent is triggered when preferences are updated
message NotificationPreferencesUpdatedEvent {
  string user_id = 1;
  string tenant_id = 2;
  google.protobuf.Timestamp updated_at = 3;
  repeated string changed_preferences = 4;
}
